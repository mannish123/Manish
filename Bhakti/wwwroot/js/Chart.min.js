function GetFormatedDate(n){var t=n.getDate(),i=n.getMonth()+1,r=n.getFullYear();return t<10&&(t="0"+t),i<10&&(i="0"+i),i+"/"+t+"/"+r}function ValidateRxProcessedSearchCriteria(){var n=0,i=$("#FromDate").val(),t=$("#ToDate").val();return(i===""?($("#FromDate").addClass("input-validation-error"),n++):$("#FromDate").removeClass("input-validation-error"),t===""||new Date(t)>TodayDate?($("#ToDate").addClass("input-validation-error"),n++):$("#ToDate").removeClass("input-validation-error"),n>0)?!1:!0}function OnFilterRxDetails(){if(!ValidateRxProcessedSearchCriteria())return!1;if(FromDate=$("#FromDate").val(),ToDate=$("#ToDate").val(),$.datepicker.parseDate("mm/dd/yy",ToDate)<$.datepicker.parseDate("mm/dd/yy",FromDate))return alert("From-Date is greater than the To-Date"),!1;var n=$("#RxProcessedBody .chartType li a.active").attr("value"),t=!1;n==="pie"&&(t=!0);GetRxProcessedDetails(n,t)}function GetRxProcessedDetails(n,t){$("#RxProcessedBody #container").html("");$("#RxProcessedBody #RxProcessedReportBody").html("");var i=new chartClass(n,"Time Interval","Rx Processed",t);i.GetProcessChartData();setTimeout(function(){i.CreateDynamicChart()},500)}function GetProcessQueueDetails(n,t){var i=new processQueueChartClass(n,"Process Queue Stages","Total Rx",t);i.GetProcessChartData();setTimeout(function(){i.CreateDynamicChart()},1250)}function ValidateDrugUtilizedSearchCriteria(){var n=0,i=$("#FromDateDrugUtilized").val(),t=$("#ToDateDrugUtilized").val();return(i===""?($("#FromDateDrugUtilized").addClass("input-validation-error"),n++):$("#FromDateDrugUtilized").removeClass("input-validation-error"),t===""||new Date(t)>TodayDate?($("#ToDateDrugUtilized").addClass("input-validation-error"),n++):$("#ToDateDrugUtilized").removeClass("input-validation-error"),n>0)?!1:!0}function OnFilterDrugUtilizationDetails(){if(!ValidateDrugUtilizedSearchCriteria())return!1;FromDateDrugUtilized=$("#FromDateDrugUtilized").val();ToDateDrugUtilized=$("#ToDateDrugUtilized").val();var n=$("#DrugUtilizationBody .chartType li a.active").attr("value"),t=!1;n==="pie"&&(t=!0);GetDrugUtilizationDetails(n,t)}function GetDrugUtilizationDetails(n,t){$("#DrugUtilizationBody #ProductSummarycontainer").html("");$("#DrugUtilizationBody #DrugUtilizationReportBody").html("");var i=new productSummaryChartClass(n,"Product","Quantity Used",t);i.GetProcessChartData();setTimeout(function(){i.CreateDynamicChart()},500)}function OnFilterLowInventoryDetails(){var n=$("#LowInventoryBody .chartType li a.active").attr("value"),t=!1;n==="pie"&&(t=!0);GetLowInventoryDetails(n,t)}function GetLowInventoryDetails(n,t){$("#LowInventoryBody #LowInventoryContainer").html("");$("#LowInventoryBody #LowInventoryReportBody").html("");var i=new lowInventorychartClass(n,"Product","Quantity Left",t);i.GetProcessChartData();setTimeout(function(){i.CreateDynamicChart()},700)}var TodayDate=new Date,ToDate="",FromDate="",ToDateDrugUtilized="",FromDateDrugUtilized="",NoDataAvailableMessage="No Data Available",chartClass,processQueueChartClass,productSummaryChartClass,lowInventorychartClass;$(document).ready(function(){var t,i,r,n;ToDate=GetFormatedDate(TodayDate);FromDate=GetFormatedDate(new Date((new Date).setDate(TodayDate.getDate()-7)));ToDateDrugUtilized=GetFormatedDate(TodayDate);FromDateDrugUtilized=GetFormatedDate(new Date((new Date).setMonth(TodayDate.getMonth()-1)));$("#FromDateDrugUtilized").val(FromDateDrugUtilized);$("#ToDateDrugUtilized").val(ToDateDrugUtilized);$("#FromDate").val(FromDate);$("#ToDate").val(ToDate);t=new chartClass("","","",!1);t.GetProcessChartData();setTimeout(function(){GetRxProcessedDetails("column",!1)},800);$(".clsRxProcessedIcon").click(function(){if(!ValidateRxProcessedSearchCriteria())return!1;$("#RxProcessedGraphView,#graph-rx-processed").addClass("active");$("#RxProcessedReportView,#Report-rx-processed").removeClass("active");t.type=$(this).attr("value");t.enabled=t.type==="pie"?!0:!1;GetRxProcessedDetails(t.type,t.enabled)});$("#RxProcessedReportView").click(function(){$(".clsRxProcessedIcon").removeClass("active")});$("#RxProcessedGraphView").click(function(){$("#RxProcessedColIcon").click()});i=new processQueueChartClass("","","",!1);i.GetProcessChartData();setTimeout(function(){GetProcessQueueDetails("pie",!0)},800);$(".clsProcessQueueIcon").click(function(){$("#ProcessQueueGraphView,#graph-process-queues").addClass("active");$("#ProcessQueueReportView,#Report-process-queues").removeClass("active");i.type=$(this).attr("value");i.enabled=i.type==="pie"?!0:!1;GetProcessQueueDetails(i.type,i.enabled)});$("#ProcessQueueReportView").click(function(){$(".clsProcessQueueIcon").removeClass("active")});$("#ProcessQueueGraphView").click(function(){$("#processQueuePieId").click()});r=new productSummaryChartClass("","","",!1);r.GetProcessChartData();setTimeout(function(){GetDrugUtilizationDetails("bar",!1)},800);$(".clsDrugUtilization").click(function(){if(!ValidateDrugUtilizedSearchCriteria())return!1;$("#DrugUtilizationGraphView,#graph-drug-util").addClass("active");$("#DrugUtilizationReportView,#Report-drug-util").removeClass("active");r.type=$(this).attr("value");r.enabled=r.type==="pie"?!0:!1;GetDrugUtilizationDetails(r.type,r.enabled)});$("#DrugUtilizationReportView").click(function(){$(".clsDrugUtilization").removeClass("active")});$("#DrugUtilizationGraphView").click(function(){$("#drugUtilizedBarId").click()});n=new lowInventorychartClass("","","",!1);n.GetProcessChartData();setTimeout(function(){GetLowInventoryDetails("column",!1)},800);$(".clsLowInventory").click(function(){$("#LowInventoryGraphView,#graph-inventory-report").addClass("active");$("#LowInventoryReportView,#Report-inventory-report").removeClass("active");n.type=$(this).attr("value");n.enabled=n.type==="pie"?!0:!1;n.text="";GetLowInventoryDetails(n.type,n.enabled)});$("#LowInventoryReportView").click(function(){$(".clsLowInventory").removeClass("active")});$("#LowInventoryGraphView").click(function(){$("#lowInventoryColId").click()})});chartClass=function(n,t,r,u){var f=[];jsonXaxisData=[];jsonYaxisData=[];this.type=n;this.text="";this.xAxisText=t;this.yAxisText=r;this.enabled=u;var o="",s="",e="";this.GetProcessChartData=function(){$.getJSON("/Home/GetRxProcessedDetails?FromDate="+FromDate+"&ToDate="+ToDate,function(n){if(n!==""){var t=JSON.parse(n),r=[],u=[];for(i=0;i<t.length;i++)f.push([t[i].TimeInterval,t[i].RxCount]),r.push(t[i].TimeInterval),u.push(t[i].RxCount),e+="<tr><td>"+t[i].TimeInterval+"<\/td><td>"+t[i].RxCount+"<\/td><\/tr>";o=u.map(function(n){return parseInt(n)}).join(",");s=r.map(function(n){return String(n)}).join(",");jsonXaxisData.push(s);jsonYaxisData.push(o)}else e+='<tr><td colspan="2" align="center">'+NoDataAvailableMessage+"<\/td><td>";$("#RxProcessedReportBody").html("").append(e)})};this.CreateDynamicChart=function(){f.length?($("#RxProcessedBody .chartType,#RxProcessedBody .chartToggle").removeClass("disabled"),$("#container").removeClass("noData"),Highcharts.chart("container",{chart:{type:this.type,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,styledMode:!1},title:{text:""},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0},series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y:.1f}"},pointWidth:20,point:{events:{}},showInLegend:!1}},xAxis:{type:"category",title:{text:this.xAxisText,style:{fontSize:"13px",fontFamily:"Open Sans, Verdana, sans-serif",fontWeight:"bold"}},labels:{style:{fontSize:"12px",fontFamily:"Open Sans, Verdana, sans-serif"},rotation:0}},yAxis:{min:0,title:{text:this.yAxisText,style:{fontSize:"13px",fontFamily:"Open Sans, Verdana, sans-serif",fontWeight:"bold"}},labels:{style:{fontSize:"12px",fontFamily:"Open Sans, Verdana, sans-serif"}}},legend:{itemStyle:{color:"#000000",fontSize:"12px",fontFamily:"Open Sans, Verdana, sans-serif",fontWeight:"initial",cursor:"default"},layout:"vertical",align:"right",verticalAlign:"top",borderWidth:0,padding:5,itemMarginTop:5,itemMarginBottom:5,width:"30%"},exporting:{enabled:!1},tooltip:{headerFormat:'<span style="font-size: 11px">{point.key}<\/span><br/>',pointFormat:"Rx Processed: <b>{point.y:.1f} <\/b>",style:{fontSize:"11px",fontFamily:"Open Sans, Verdana, sans-serif"}},series:[{name:"",colorByPoint:!0,data:f}]})):($("#container").html("").text(NoDataAvailableMessage).addClass("noData"),$("#RxProcessedBody .chartType,#RxProcessedBody .chartToggle").addClass("disabled"))}};processQueueChartClass=function(n,t,r,u){var f,e;$(".loader").show();f="";this.type=n;this.text="";this.xAxisText=t;this.yAxisText=r;this.enabled=u;e="";this.GetProcessChartData=function(){$.getJSON("/Home/GetProcessQueueDetails",function(n){if(n!==""){f=JSON.parse(n);var t=JSON.parse(n);if(t.ProcessQueueDetails!==null)for(i=0;i<t.length;i++)e+="<tr><td>"+t[i].name+"<\/td><td>"+t[i].y+"<\/td><\/tr>"}else e+='<tr><td colspan="2" align="center">'+NoDataAvailableMessage+"<\/td><td>";$("#ProcessQueueReport tbody").html("").append(e);$(".loader").hide()})};this.CreateDynamicChart=function(){f.length?($("#ProcessQueueBody .chartType,#ProcessQueueBody .chartToggle").removeClass("disabled"),$("#ProcessQueuecontainer").removeClass("noData"),Highcharts.chart("ProcessQueuecontainer",{chart:{type:this.type,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,styledMode:!1},title:{text:""},plotOptions:{pie:{allowPointSelect:!1,sliced:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0},series:{borderWidth:0,cursor:"pointer",sliced:!0,dataLabels:{enabled:!0,format:"{point.y:.1f}"},pointWidth:15,point:{events:{click:function(){var n="/ProcessQueue/ProcessQueueStages/Create?SearchType="+this.options.key;window.open(n,"_blank")}}},showInLegend:!1}},xAxis:{type:"category",title:{text:this.xAxisText,style:{fontSize:"13px",fontFamily:"Open Sans, Verdana, sans-serif",fontWeight:"bold"}},labels:{style:{fontSize:"12px",fontFamily:"Open Sans, Verdana, sans-serif"},rotation:0}},yAxis:{min:0,title:{text:this.yAxisText,style:{fontSize:"13px",fontFamily:"Open Sans, Verdana, sans-serif",fontWeight:"bold"}},labels:{style:{fontSize:"12px",fontFamily:"Open Sans, Verdana, sans-serif"}}},legend:{itemStyle:{color:"#000000",fontSize:"12px",fontFamily:"Open Sans, Verdana, sans-serif",fontWeight:"initial",cursor:"default"},layout:"vertical",align:"right",verticalAlign:"top",borderWidth:0,padding:5,itemMarginTop:5,itemMarginBottom:5,width:"30%"},exporting:{enabled:!1},tooltip:{headerFormat:'<span style="font-size: 11px">{point.key}<\/span><br/>',pointFormat:"Total Rx: <b>{point.y:.1f} <\/b>",style:{fontSize:"11px",fontFamily:"Open Sans, Verdana, sans-serif"}},series:[{name:"",colorByPoint:!0,data:f}]})):($("#ProcessQueuecontainer").html("").text(NoDataAvailableMessage).addClass("noData"),$("#ProcessQueueBody .chartType,#ProcessQueueBody .chartToggle").addClass("disabled"))}};productSummaryChartClass=function(n,t,r,u){var f,o,e;$(".loader").show();f="";o=15;this.type=n;this.text="";this.xAxisText=t;this.yAxisText=r;this.enabled=u;e="";this.GetProcessChartData=function(){$.getJSON("/Home/GetDrugUtilizationDetails?From="+FromDateDrugUtilized+"&To="+ToDateDrugUtilized+"&scheduleId="+$("#ScheduleDrugId").val(),function(n){if(n!==""){f=JSON.parse(n);var t=JSON.parse(n);for(i=0;i<t.length;i++)e+="<tr><td>"+t[i].name+"<\/td><td>"+t[i].y+"<\/td><\/tr>";o=f.length<5?25:15}else e+='<tr><td colspan="2" align="center">'+NoDataAvailableMessage+"<\/td><td>";$("#DrugUtilizationReportBody").html("").append(e);$(".loader").hide()})};this.CreateDynamicChart=function(){f.length?($("#DrugUtilizationBody .chartType,#DrugUtilizationBody .chartToggle").removeClass("disabled"),$("#ProductSummarycontainer").removeClass("noData"),Highcharts.chart("ProductSummarycontainer",{chart:{type:this.type,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,styledMode:!1},title:{text:""},plotOptions:{pie:{allowPointSelect:!1,sliced:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0},series:{borderWidth:0,cursor:"pointer",dataLabels:{enabled:!0,format:"{point.y:.1f}"},pointWidth:o,point:{events:{click:function(){var n="/Product/ProductBasicInformation/Create?ProductId="+this.options.key;window.open(n,"_blank")}}},showInLegend:!1}},xAxis:{type:"category",title:{text:this.xAxisText,style:{fontSize:"13px",fontFamily:"Open Sans, Verdana, sans-serif",fontWeight:"bold"}},labels:{style:{fontSize:"12px",fontFamily:"Open Sans, Verdana, sans-serif"},rotation:0}},yAxis:{min:0,title:{text:this.yAxisText,style:{fontSize:"13px",fontFamily:"Open Sans, Verdana, sans-serif",fontWeight:"bold"}},labels:{style:{fontSize:"12px",fontFamily:"Open Sans, Verdana, sans-serif"}}},legend:{itemStyle:{color:"#000000",fontSize:"12px",fontFamily:"Open Sans, Verdana, sans-serif",fontWeight:"initial",cursor:"default"},layout:"vertical",align:"right",verticalAlign:"top",borderWidth:0,padding:5,itemMarginTop:5,itemMarginBottom:5,width:"30%"},exporting:{enabled:!1},tooltip:{headerFormat:'<span style="font-size: 11px">{point.key}<\/span><br/>',pointFormat:"Quantity Used: <b>{point.y:.1f} <\/b>",style:{fontSize:"11px",fontFamily:"Open Sans, Verdana, sans-serif"}},series:[{name:"",colorByPoint:!0,data:f}]})):($("#ProductSummarycontainer").html("").append(NoDataAvailableMessage).addClass("noData"),$("#DrugUtilizationBody .chartType,#DrugUtilizationBody .chartToggle").addClass("disabled"))}};lowInventorychartClass=function(n,t,r,u){var f,o,e;$(".loader").show();f="";o=15;this.type=n;this.text="";this.xAxisText=t;this.yAxisText=r;this.enabled=u;e="";this.GetProcessChartData=function(){$.getJSON("/Home/GetInventoryReport?inventoryId="+$("#inventoryId").val()+"&scheduleid="+$("#inventoryScheduleId").val(),function(n){if(n!==""){f=JSON.parse(n);var t=JSON.parse(n);for(i=0;i<t.length;i++)e+="<tr><td>"+t[i].name+"<\/td><td>"+t[i].y+"<\/td><\/tr>";o=f.length<5?25:15}else e+='<tr><td colspan="2" align="center">'+NoDataAvailableMessage+"<\/td><td>";$("#LowInventoryReportBody").html("").append(e)});$(".loader").hide()};this.CreateDynamicChart=function(){f.length?($("#LowInventoryBody .chartType,#LowInventoryBody .chartToggle").removeClass("disabled"),$("#LowInventoryContainer").removeClass("noData"),Highcharts.chart("LowInventoryContainer",{chart:{type:this.type,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,styledMode:!1},title:{text:""},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0},series:{borderWidth:0,cursor:"pointer",dataLabels:{enabled:!0,format:"{point.y:.1f}"},pointWidth:o,point:{events:{click:function(){var n="/Inventory/ProductVendorInventory/ProductVendor?productId="+this.options.key;window.open(n,"_blank")}}},showInLegend:!1}},xAxis:{type:"category",title:{text:this.xAxisText,style:{fontSize:"13px",fontFamily:"Open Sans, Verdana, sans-serif",fontWeight:"bold"}},labels:{style:{fontSize:"12px",fontFamily:"Open Sans, Verdana, sans-serif"},rotation:0}},yAxis:{min:0,title:{text:this.yAxisText,style:{fontSize:"13px",fontFamily:"Open Sans, Verdana, sans-serif",fontWeight:"bold"}},labels:{style:{fontSize:"12px",fontFamily:"Open Sans, Verdana, sans-serif"}}},legend:{itemStyle:{color:"#000000",fontSize:"12px",fontFamily:"Open Sans, Verdana, sans-serif",fontWeight:"initial",cursor:"default"},layout:"vertical",align:"right",verticalAlign:"top",borderWidth:0,padding:5,itemMarginTop:5,itemMarginBottom:5,width:"30%"},exporting:{enabled:!1},tooltip:{headerFormat:'<span style="font-size: 11px">{point.key}<\/span><br/>',pointFormat:"Quantity Left: <b>{point.y:.1f} <\/b>",style:{fontSize:"11px",fontFamily:"Open Sans, Verdana, sans-serif"}},series:[{name:"",colorByPoint:!0,data:f}]})):($("#LowInventoryContainer").html("").text(NoDataAvailableMessage).addClass("noData"),$("#LowInventoryBody .chartType,#LowInventoryBody .chartToggle").addClass("disabled"))}};